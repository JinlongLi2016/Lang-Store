# slice

切片是一种优雅的操作列表方式。通过切片，可以快速地实现列表的转置、跳跃地获取列表子序列、列表复制等功能。它的语法如下

![img](https://pic4.zhimg.com/80/v2-83c46b2c85d46dc22407b670c2dd7d3b_720w.jpg)

`start`参数指定切片的开始位置；`end`指定切片的结束位置;`step`参数指定步幅，也就是从`start`到`end`每隔多少步取一个数字。

举一个例子`slice(0, 5, 2)`，这个切片始于0，终于5，步幅位2，指定的就是第0， 2， 4个位置。

来看看这个切片具体的功效

![img](https://pic2.zhimg.com/80/v2-639be284a4b22938bcc55571e9677d41_720w.jpg)

这个例子中，lst是包含5个元素的列表，slice指定了第0，2， 4个位置。通过`lst[slice(0, 5, 2)]`的方式我们成功地提取了第0，2， 4个位置的元素。

可是我们常看到的切片的使用方式是`lst[0:5:2]`，而不是`lst[slice(0, 5, 2)]`。这是为什么呢?

原来，`lst[0:5:2]`是Python提供的一种语法糖。当我们使用`lst[0:5:2]`时，Python内部会将其翻译为`lst[slice(0, 5, 2)]`的形式。`lst[0:5:2]`中两个冒号分割出了三个位置，分别对应这`slice`中的`start`、`end`、`step`。

关于语法糖，其被引入是为了简化某些场景下代码。语法糖的内部机制此处不做详细论述，简短而言就是在代码编译时将代码翻译为常规代码，就比如在编译时将`lst[0:5:2]`翻译为`lst[slice(0, 5, 2)]`再执行。Python中运用语法糖的场景有很多，比如类似于C中三元运算符`a > 0? 1: 0`的`1 if a>0 else 0`。

接下来，我们来看看`切片(slice)`的使用场景

## **在何处使用`slice`？**

1.翻转拷贝2.获取奇数位置元素3.修改列表指定位置元素4.清空列表

## **翻转列表`[::-1]`**

![img](https://pic4.zhimg.com/80/v2-cfa463f6ddcb770308c4168bf851ed8f_720w.jpg)

将列表的元素的顺序逆转过来，并以列表的形式返回

## **拷贝列表`[:]`**

![img](https://pic1.zhimg.com/80/v2-551e3e322f165e9d3a012381170c7acc_720w.jpg)

`new_lst`含有与`lst`一模一样的元素。

## **获取列表奇数位元素`[::2]`**

![img](https://pic3.zhimg.com/80/v2-ce25df12f56fcdbd6519b4bd8d3e06ae_720w.jpg)

`lst[::2]`中，切片没有指定开始和结束位置，因此默认就是最开始(0)和最末尾处，步幅为2就表示从0开始，每两个元素就取一个元素，因此取的元素就是这个列表的第1、3、5...个元素。

## **清空列表** **`del lst[:]`**

清空此列表，并且保持列表引用不变

![img](https://pic4.zhimg.com/80/v2-3dedf0843ee500ec24023b834e2f02cf_720w.jpg)

很多人会将其与 `del lst`混淆，`del lst`会将`lst`这个变量删除，而`del lst[:]`只会将`lst`这个列表清空，列表还是那个列表，只是列表里面的元素空了。

```
del lst[:]`的等价实现方式为`lst[:] = []
```

## **赋值`lst[::2] = [0, 4，8]`**

除了获取列表中的元素，某些场景下切片还可以高效地修改列表中指定的一些元素。比如修改奇数位置的元素为指定的列表。举个例子

![img](https://pic3.zhimg.com/80/v2-034a3add4fc432cc2f5dd0dae4b66ff2_720w.jpg)

`lst`一开始为`[0, 1, 2, 3, 4]`,通过`lst[::2]=[0, 4, 8]`可以将奇书位置修改为[0, 4, 8]。赋值要求切片中的元素与右侧列表中的元素保持一直。

## **slice的更多信息**

Python中不仅可以对列表应用切片，还可以对字符串和元组等对象应用切片。

实际上，对于任何对象，只要实现了序列协议（sequence protocal: `__getitem__` and `__len__`方法）就可以运用切片。